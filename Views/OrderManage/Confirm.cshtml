@model HoaDon

@{
    ViewData["Title"] = "Confirm";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="ibox-content m-b-sm border-bottom">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox">
                <div class="ibox-content">
                    <table class="footable table table-stripped toggle-arrow-tiny">
                        <thead>
                            <tr>
                                <th>Sản phẩm</th>
                                <th>Số lượng</th>
                                <th>Đơn giá</th>
                                <th>Tổng tiền</th>
                                <th>Trạng thái</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                foreach (var item in Model.ChiTietHoaDon)
                                {
                                    var hinhanh = "/ProductImages/default-product.png";
                                    if (!string.IsNullOrEmpty(item.MaSanPhamNavigation.HinhAnh))
                                    {
                                        hinhanh = "/ProductImages/" + item.MaSanPhamNavigation.HinhAnh;
                                    }

                                    string button = item.MaSanPhamNavigation.MaCuaHang == ViewBag.ShopId ? "" : "disabled";
                                    <tr>
                                        <td>
                                            <div style="width:100px;height:100px"><img src="@hinhanh" style="max-height:100%;max-width:100%;" /></div>
                                        </td>
                                        <td>@Html.DisplayFor(a => item.SoLuong)</td>
                                        <td>@Html.DisplayFor(a => item.DonGia)</td>
                                        <td>@Html.DisplayFor(a => item.TongTien)</td>
                                        <td>@Html.DisplayFor(a => item.TrangThai)</td>
                                        <td><form method="post"><button asp-action="Confirm" asp-controller="OrderManage" asp-route-id="@item.MaHoaDon" asp-route-spid="@item.MaSanPham" class="btn-white btn btn-xs @button">Xác nhận</button></form></td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>